<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Mon Dec 25 13:34:13 CST 2023 -->
<title>TtlAgent (TransmittableThreadLocal(TTL) 2.14.5 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-12-25">
<meta name="description" content="declaration: package: com.alibaba.ttl.threadpool.agent, class: TtlAgent">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/TtlAgent.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.alibaba.ttl.threadpool.agent</a></div>
<h1 title="Class TtlAgent" class="title">Class TtlAgent</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.alibaba.ttl.threadpool.agent.TtlAgent</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">TtlAgent</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">TTL Java Agent.

 <h2>The configuration/arguments for TTL agent</h2>
 <p>
 Configure TTL agent via agent arguments, format is <code>k1:v1,k2:v2</code>. Below is available configuration keys.

 <h3>Disable inheritable for thread pool</h3>
 <p>
 Enable "disable inheritable" for thread pool, config by key <code>ttl.agent.disable.inheritable.for.thread.pool</code>.
 When no configuration for this key, default does <b>not</b> enabled. Since version <code>2.10.1</code>.

 <ul>
 <li>rewrite the <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ThreadFactory.html" title="class or interface in java.util.concurrent" class="external-link"><code>ThreadFactory</code></a> constructor parameter
 of <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.html" title="class or interface in java.util.concurrent" class="external-link"><code>ThreadPoolExecutor</code></a>
 to <a href="../DisableInheritableThreadFactory.html" title="interface in com.alibaba.ttl.threadpool"><code>DisableInheritableThreadFactory</code></a>
 by util method <a href="../TtlExecutors.html#getDisableInheritableThreadFactory(java.util.concurrent.ThreadFactory)"><code>getDisableInheritableThreadFactory</code></a>.
 </li>
 <li>rewrite the <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.ForkJoinWorkerThreadFactory.html" title="class or interface in java.util.concurrent" class="external-link"><code>ForkJoinPool.ForkJoinWorkerThreadFactory</code></a> constructor parameter
 of <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html" title="class or interface in java.util.concurrent" class="external-link"><code>ForkJoinPool</code></a>
 to <a href="../DisableInheritableForkJoinWorkerThreadFactory.html" title="interface in com.alibaba.ttl.threadpool"><code>DisableInheritableForkJoinWorkerThreadFactory</code></a>
 by util method <a href="../TtlForkJoinPoolHelper.html#getDisableInheritableForkJoinWorkerThreadFactory(java.util.concurrent.ForkJoinPool.ForkJoinWorkerThreadFactory)"><code>getDisableInheritableForkJoinWorkerThreadFactory</code></a>.
 </li>
 </ul>
 More info about "disable inheritable" see <a href="../../TransmittableThreadLocal.html" title="class in com.alibaba.ttl"><code>TransmittableThreadLocal</code></a>.
 <p>
 Configuration example:<br>
 <code>-javaagent:/path/to/transmittable-thread-local-2.x.y.jar=ttl.agent.disable.inheritable.for.thread.pool:true</code>

 <h3>The log configuration</h3>
 The log of TTL Java Agent is config by key <code>ttl.agent.logger</code>. Since version <code>2.6.0</code>.

 <ul>
 <li><code>ttl.agent.logger : STDERR</code><br>
 only log to <code>stderr</code> when error.
 This is <b>default</b>, when no/unrecognized configuration for key <code>ttl.agent.logger</code>.</li>
 <li><code>ttl.agent.logger : STDOUT</code><br>
 Log to <code>stdout</code>, more info than <code>ttl.agent.logger:STDERR</code>; This is needed when developing.</li>
 </ul>
 <p>
 configuration example:
 <ul>
 <li><code>-javaagent:/path/to/transmittable-thread-local-2.x.y.jar</code></li>
 <li><code>-javaagent:/path/to/transmittable-thread-local-2.x.y.jar=ttl.agent.logger:STDOUT</code></li>
 </ul>

 <h3>Enable/disable TimerTask class decoration</h3>
 Enable/disable TimerTask class decoration is config by key <code>ttl.agent.enable.timer.task</code>.
 Since version <code>2.7.0</code>.
 <p>
 When no configuration for this key, default is <b>enabled</b>.<br>
 <b><i>Note</i></b>: Since version <code>2.11.2</code> the default value is <code>true</code>(enable TimerTask class decoration);
 Before version <code>2.11.1</code> default value is <code>false</code>.
 <p>
 Configuration example:
 <ul>
 <li><code>-javaagent:/path/to/transmittable-thread-local-2.x.y.jar=ttl.agent.enable.timer.task:false</code></li>
 <li><code>-javaagent:/path/to/transmittable-thread-local-2.x.y.jar=ttl.agent.enable.timer.task:true</code></li>
 </ul>

 <h3>Multi key configuration example</h3>
 <code>-javaagent:/path/to/transmittable-thread-local-2.x.y.jar=ttl.agent.logger:STDOUT,ttl.agent.disable.inheritable.for.thread.pool:true</code>

 <h2>About boot classpath for TTL agent</h2>
 <b><i>NOTE:</i></b> Since <code>v2.6.0</code>, TTL agent jar will auto add self to <code>boot classpath</code>.
 But you <b>should <i>NOT</i></b> modify the downloaded TTL jar file name in the maven repo(eg: <code>transmittable-thread-local-2.x.y.jar</code>).<br>
 if you modified the downloaded TTL agent jar file name(eg: <code>ttl-foo-name-changed.jar</code>),
 you must add TTL agent jar to <code>boot classpath</code> manually
 by java option <code>-Xbootclasspath/a:path/to/ttl-foo-name-changed.jar</code>.
 <p>
 The implementation of auto adding self agent jar to <code>boot classpath</code> use
 the <code>Boot-Class-Path</code> property of manifest file(<code>META-INF/MANIFEST.MF</code>) in the TTL Java Agent Jar:
 <blockquote>
 <dl>
 <dt>Boot-Class-Path</dt>
 <dd>
 A list of paths to be searched by the bootstrap class loader. Paths represent directories or libraries (commonly referred to as JAR or zip libraries on many platforms).
 These paths are searched by the bootstrap class loader after the platform specific mechanisms of locating a class have failed. Paths are searched in the order listed.
 </dd>
 </dl>
 </blockquote>
 <p>
 More info about <code>Boot-Class-Path</code> see
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.instrument/java/lang/instrument/package-summary.html">The mechanism for instrumentation</a>.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.9.0</dd>
<dt>Author:</dt>
<dd>Jerry Lee (oldratlee at gmail dot com)</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/instrument/Instrumentation.html" title="class or interface in java.lang.instrument" class="external-link"><code>Instrumentation</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.instrument/java/lang/instrument/package-summary.html">The mechanism for instrumentation</a></li>
<li><a href="https://docs.oracle.com/en/java/javase/21/docs/specs/jar/jar.html#jar-manifest">JAR File Specification - JAR Manifest</a></li>
<li><a href="https://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html">Working with Manifest Files - The Java™ Tutorials</a></li>
<li><a href="../../TransmittableThreadLocal.html" title="class in com.alibaba.ttl"><code>TransmittableThreadLocal</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ThreadPoolExecutor.html" title="class or interface in java.util.concurrent" class="external-link"><code>ThreadPoolExecutor</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ScheduledThreadPoolExecutor.html" title="class or interface in java.util.concurrent" class="external-link"><code>ScheduledThreadPoolExecutor</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ForkJoinPool.html" title="class or interface in java.util.concurrent" class="external-link"><code>ForkJoinPool</code></a></li>
<li><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/TimerTask.html" title="class or interface in java.util" class="external-link"><code>TimerTask</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isDisableInheritableForThreadPool()" class="member-name-link">isDisableInheritableForThreadPool</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Whether disable inheritable for thread pool is enhanced by ttl agent, check <a href="#isTtlAgentLoaded()"><code>isTtlAgentLoaded()</code></a> first.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isEnableTimerTask()" class="member-name-link">isEnableTimerTask</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Whether timer task is enhanced by ttl agent, check <a href="#isTtlAgentLoaded()"><code>isTtlAgentLoaded()</code></a> first.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isTtlAgentLoaded()" class="member-name-link">isTtlAgentLoaded</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Whether TTL agent is loaded.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#premain(java.lang.String,java.lang.instrument.Instrumentation)" class="member-name-link">premain</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;agentArgs,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/instrument/Instrumentation.html" title="class or interface in java.lang.instrument" class="external-link">Instrumentation</a>&nbsp;inst)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Entrance method of TTL Java Agent.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="premain(java.lang.String,java.lang.instrument.Instrumentation)">
<h3>premain</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">premain</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;agentArgs,
 <a href="https://www.javadoc.io/doc/com.github.spotbugs/spotbugs-annotations/4.8.3/edu/umd/cs/findbugs/annotations/NonNull.html" title="class or interface in edu.umd.cs.findbugs.annotations" class="external-link">@NonNull</a>
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/instrument/Instrumentation.html" title="class or interface in java.lang.instrument" class="external-link">Instrumentation</a>&nbsp;inst)</span></div>
<div class="block">Entrance method of TTL Java Agent.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><code>Logger</code></li>
<li><code>Logger.TTL_AGENT_LOGGER_KEY</code></li>
<li><code>Logger.STDERR</code></li>
<li><code>Logger.STDOUT</code></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isTtlAgentLoaded()">
<h3>isTtlAgentLoaded</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isTtlAgentLoaded</span>()</div>
<div class="block">Whether TTL agent is loaded.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>2.9.0</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isDisableInheritableForThreadPool()">
<h3>isDisableInheritableForThreadPool</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isDisableInheritableForThreadPool</span>()</div>
<div class="block">Whether disable inheritable for thread pool is enhanced by ttl agent, check <a href="#isTtlAgentLoaded()"><code>isTtlAgentLoaded()</code></a> first.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>2.10.1</dd>
<dt>See Also:</dt>
<dd>
<ul class="see-list-long">
<li><a href="../TtlExecutors.html#getDefaultDisableInheritableThreadFactory()"><code>TtlExecutors.getDefaultDisableInheritableThreadFactory()</code></a></li>
<li><a href="../TtlExecutors.html#getDisableInheritableThreadFactory(java.util.concurrent.ThreadFactory)"><code>TtlExecutors.getDisableInheritableThreadFactory(java.util.concurrent.ThreadFactory)</code></a></li>
<li><a href="../DisableInheritableThreadFactory.html" title="interface in com.alibaba.ttl.threadpool"><code>DisableInheritableThreadFactory</code></a></li>
<li><a href="../TtlForkJoinPoolHelper.html#getDefaultDisableInheritableForkJoinWorkerThreadFactory()"><code>TtlForkJoinPoolHelper.getDefaultDisableInheritableForkJoinWorkerThreadFactory()</code></a></li>
<li><a href="../TtlForkJoinPoolHelper.html#getDisableInheritableForkJoinWorkerThreadFactory(java.util.concurrent.ForkJoinPool.ForkJoinWorkerThreadFactory)"><code>TtlForkJoinPoolHelper.getDisableInheritableForkJoinWorkerThreadFactory(java.util.concurrent.ForkJoinPool.ForkJoinWorkerThreadFactory)</code></a></li>
<li><a href="../DisableInheritableForkJoinWorkerThreadFactory.html" title="interface in com.alibaba.ttl.threadpool"><code>DisableInheritableForkJoinWorkerThreadFactory</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isEnableTimerTask()">
<h3>isEnableTimerTask</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isEnableTimerTask</span>()</div>
<div class="block">Whether timer task is enhanced by ttl agent, check <a href="#isTtlAgentLoaded()"><code>isTtlAgentLoaded()</code></a> first.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>2.10.1</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2013&#x2013;2023 <a href="https://www.alibaba.com">Alibaba</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
